<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>부동산 규제 지도</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
      }
      #map {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>

    <!-- ✅ Kakao SDK를 defer로 불러오고 onload에서 initMap 호출 -->
    <script defer
      src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=b8652ed77f204a87617e61ab12731dfd&autoload=false"
      onload="kakao.maps.load(initMap)">
    </script>

    <!-- ✅ 지도 초기화 함수 정의 -->
    <script>
      function initMap() {
        const map = new kakao.maps.Map(document.getElementById("map"), {
          center: new kakao.maps.LatLng(36.5, 127.8),
          level: 13,
        });

        // GeoJSON 파일 불러오기
        fetch("skorea-municipalities-2018-geo2.json")
          .then((response) => response.json())
          .then((geojson) => {
            geojson.features.forEach((feature) => {
              const coords = feature.geometry.coordinates[0].map(
                (coord) => new kakao.maps.LatLng(coord[1], coord[0])
              );

              new kakao.maps.Polygon({
                map: map,
                path: coords,
                strokeWeight: 1,
                strokeColor: "#333",
                strokeOpacity: 0.8,
                fillColor: "#dddddd",
                fillOpacity: 0.6,
              });
            });
          });
      }
    </script>
  </body>
</html>
